<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="Comment">
		
	<select id="Comment_getList"  parameterType="CommentDto" resultType="CommentDto" >
		select 
		  	A.seq
		  	,A.userid
		  	,A.comments
		  	,to_char(A.regdate, 'yyyy-mm-dd HH24:mi:ss') regdate
		from tb_comment   A 
		where delyn='N' and board_seq=#{board_seq}	
	</select>
	
	<insert id="Comment_insert" parameterType="CommentDto">
		<selectKey resultType="String" keyProperty="seq" order="BEFORE">
			select nvl(max(seq), 0)+1  as seq  
			from tb_comment
		</selectKey>
		insert into tb_comment
		(
		    board_seq 
		    ,seq 
		    ,userid
			,comments
			,regdate 
			,delyn
		)
		values
		(
			 ${board_seq} 
		    ,${seq} 
		    ,#{userid}
			,#{comments}
			,sysdate 
			,'N'
		)
	</insert>
</mapper>












